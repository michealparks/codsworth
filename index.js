!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./app/index.js")}({"./app/index.js":function(e,t,r){"use strict";r.r(t);const n=["Tornado","Tropical storm","Hurricane","Severe thunderstorms","Thunderstorms","Mixed rain and snow","Mixed rain and sleet","Mixed snow and sleet","Freezing drizzle","Drizzle","Freezing rain","Showers","Showers","Snow flurries","Light snow showers","Blowing snow","Snow","Hail","Sleet","Dust","Foggy","Haze","Smoky","Blustery","Windy","Cold","Cloudy","Mostly cloudy (night)","Mostly cloudy (day)","Partly cloudy (night)","Partly cloudy (day)","Clear (night)","Sunny","Fair (night)","Fair (day)","Mixed rain and hail","Hot","Isolated thunderstorms","Scattered thunderstorms","Scattered thunderstorms","Scattered showers","Heavy snow","Scattered snow showers","Heavy snow","Partly cloudy","Thundershowers","Snow showers","Isolated thundershowers"],o=e=>1e3*e*60,s=e=>1e3*e*60*60*24,a=JSON.stringify.bind(JSON),c=JSON.parse.bind(JSON),i=localStorage.getItem.bind(localStorage),u=localStorage.setItem.bind(localStorage),l=!(()=>{try{const e="__storage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}})(),d=(e,t)=>{if(!l)return void 0!==t?u(e,a(t)):c(i(e))},g="https://query.yahooapis.com/v1/public/yql?format=json&q=";let m,y,h=!1,w=d("weather"),p=d("geolocation");const S=()=>(h=!0,y?f(y):null),f=e=>{if(y=e,h)return w&&Date.now()-w.time<o(30)?y(null,w):((m=new XMLHttpRequest).open("GET","string"==typeof p?v(p):b(p.latitude,p.longitude),!0),m.responseType="json",m.onload=M,m.onerror=x,m.send())},b=(e,t)=>g+'select * from weather.forecast where woeid in (SELECT woeid FROM geo.places(1) WHERE text="('+e+","+t+')")',v=e=>g+'select * from weather.forecast where u="c" AND woeid in (select woeid from geo.places(1) WHERE text="'+e+'")',M=()=>{const e=m.response.query.results.channel;return"Yahoo! Weather Error"===e.description?y(e.item.description):(w={temp:e.item.condition.temp,code:(e=>({description:n[e],icon:(e=>{switch(e){case"Tornado":case"Tropical storm":case"Hurricane":case"Severe thunderstorms":case"Thunderstorms":case"Isolated thunderstorms":case"Scattered thunderstorms":case"Thundershowers":case"Isolated thundershowers":return"stormy";case"Mixed rain and snow":case"Mixed rain and sleet":case"Mixed snow and sleet":case"Snow flurries":case"Light snow showers":case"Blowing snow":case"Snow":case"Heavy snow":case"Scattered snow showers":case"Snow showers":return"snowy";case"Freezing drizzle":case"Drizzle":case"Dust":case"Scattered showers":return"rainy";case"Freezing rain":case"Showers":case"Hail":case"Sleet":case"Mixed rain and hail":return"rainy-2";case"Partly cloudy (night)":case"Partly cloudy (day)":case"Partly cloudy":return"cloudy";case"Cold":case"Cloudy":case"Mostly cloudy (night)":return"cloudy-2";case"Foggy":case"Haze":case"Smoky":case"Blustery":case"Windy":case"Mostly cloudy (day)":return"cloudy-3";case"Clear (night)":case"Fair (night)":return"clear-night";case"Sunny":case"Fair (day)":case"Hot":return"sunny"}})(n[e])}))(e.item.condition.code),time:Date.now()},d("weather",w),y(null,w))},x=()=>{};"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(({coords:e})=>(d("geolocation",{time:Date.now(),latitude:e.latitude,longitude:e.longitude}),p=e,S()),e=>{switch(e.code){case e.PERMISSION_DENIED:case e.POSITION_UNAVAILABLE:case e.TIMEOUT:case e.UNKNOWN_ERROR:return}}),p&&S();const T=document.getElementById("weather"),O=T.children[0],I=T.children[1],E=T.children[2];let j,F=d("settings:weather-units")||"C";const L=(e,t)=>{if(t)return e?setTimeout(f,o(2),L):(j=t.temp,O.textContent=D(j),I.textContent=`° ${F}`,E.innerHTML=(e=>`<svg><use xlink:href='#icon-${e}'></use></svg>`)(t.code.icon||""),setTimeout(f,o(30)))},D=e=>"F"===F?e:(5*(e-32)/9).toFixed(1);let H,P,A,C;if(T.onclick=(()=>{F="F"===F?"C":"F",O.textContent=D(j),I.textContent=`° ${F}`,d("settings:weather-units",F)}),L(d("weather")),f(L),void 0!==window.indexedDB){const e=window.indexedDB.open("codsworth",1);e.onsuccess=(t=>{(H=e.result).onerror=(e=>{}),P=!0,C&&_(C)}),e.onupgradeneeded=(e=>{e.target.result.createObjectStore("images").createIndex("image","image",{unique:!1}),e.target.transaction.oncomplete=(e=>{})})}else A=!0;const _=e=>{if(A)return e(!0);P?H.transaction(["images"],"readwrite").objectStore("images").get("image").onsuccess=(t=>e(null,t.target.result)):C=e},k=[document.getElementById("bg-0"),document.getElementById("bg-1")],N=k[1].classList,z=document.getElementById("text"),B=new window.Image,J=d("image"),R=new DOMParser;let W,q=0;_((e,t)=>{(e||!J||Date.now()-J.time>=s(1))&&$(),t&&J&&Q(URL.createObjectURL(t),J.text)});const $=()=>{setTimeout($,s(1)),U("json","https://en.wikipedia.org/w/api.php?action=parse&prop=text&page=Main_Page&format=json&origin=*",G,X)},U=(e,t,r,n)=>{const o=new XMLHttpRequest;o.open("GET",t),o.responseType=e,o.onerror=r,o.ontimeout=r,o.onload=(()=>n(o.response)),o.send()},G=()=>{},X=e=>{const t=R.parseFromString(e.parse.text["*"],"text/html").querySelector("#mp-lower"),r=t.querySelector("img").getAttribute("src").split("/"),n=r.pop().replace(/^[0-9]{3,4}px/,"2400px"),o="https:"+r.join("/")+"/"+n;U("blob",o,Y,K);const s=t.querySelector("p"),a=s.querySelectorAll("a");for(let e,t=0,r=a.length;t<r;++t)(e=a[t]).setAttribute("href","https://wikipedia.org"+e.getAttribute("href")),e.setAttribute("target","_blank");W=s.innerHTML},K=e=>{const t=URL.createObjectURL(e);Q(t,W),V=e,H.transaction(["images"],"readwrite").objectStore("images").put(V,"image"),d("image",{text:W,time:Date.now()})};var V;const Y=()=>{},Q=(e,t)=>{k[q=(q+1)%2].style.backgroundImage=`url("${e}")`,z.innerHTML=t,B.onload=(()=>N.toggle("bg-image--active",1===q)),B.src=e},Z=document.getElementById("time"),ee=document.getElementById("date");let te,re,ne,oe,se=d("settings:time-format")||"24hr",ae=d("settings:date-format")||"words";const ce=e=>(re=(new Date).toString().split(" "),"24hr"===se?Z.textContent=re[4].split(":").slice(0,-1).join("."):(te=re[4].split(":"),ne=+te[0]<12?"AM":"PM",te[0]=+te[0]%12||12,Z.textContent=te.slice(0,-1).join("."),ne!==oe&&(Z.classList.toggle("am","AM"===ne),Z.classList.toggle("pm","PM"===ne),oe=ne)),ee.textContent="numbers"===ae?`${re[2]} / ${(e=>{switch(e){case"Jan":return 1;case"Feb":return 2;case"Mar":return 3;case"Apr":return 4;case"May":return 5;case"Jun":return 6;case"Jul":return 7;case"Aug":return 8;case"Sep":return 9;case"Oct":return 10;case"Nov":return 11;case"Dec":return 12}})(re[1])} / ${re[3].slice(2)}`:`${(e=>{switch(e){case"Mon":return"Monday";case"Tue":return"Tuesday";case"Wed":return"Wednesday";case"Thu":return"Thursday";case"Fri":return"Friday";case"Sat":return"Saturday";case"Sun":return"Sunday"}})(re[0])}, ${(e=>{switch(e){case"Jan":return"January";case"Feb":return"February";case"Mar":return"March";case"Apr":return"April";case"May":return"May";case"Jun":return"June";case"Jul":return"July";case"Aug":return"August";case"Sep":return"September";case"Oct":return"October";case"Nov":return"November";case"Dec":return"December"}})(re[1])} ${re[2]}, ${re[3]}`,e?null:setTimeout(ce,1e3));Z.onclick=(()=>{oe=null,"24hr"==(se="24hr"===se?"12hr":"24hr")&&Z.classList.remove("am","pm"),ce(!0),d("settings:time-format",se)}),ee.onclick=(()=>{ae="words"===ae?"numbers":"words",ce(!0),d("settings:date-format",ae)}),ce(),void 0!==navigator.serviceWorker&&(navigator.serviceWorker.addEventListener("controllerchange",e=>navigator.serviceWorker.controller.addEventListener("statechange",()=>{})),navigator.serviceWorker.register("offline-worker.js").then(e=>{}).catch(e=>void 0))}});